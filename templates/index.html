{% extends "base.html" %}

{% load i18n %}
{% load account socialaccount %}

{% block head_title %}{% trans "Sign In" %}{% endblock %}

{% block content %}

<div class="container first-bg">
    {% if user.is_authenticated %}
    <h1 class="h-center">What do you want to achieve to day?</h1>
    <div class="container-fluid second-bg">
        <div class="row">
            <div class="col-12 mt-3 left">
                <div class="row">
                    <div class="col-md-4">
                    <h4><a class="link" href="{% url 'projects' %}">Projects</a></h4>
                            <p>To manage your construction projects, then go to <a class="link" href="{% url 'projects' %}">projects</a></p>
                </div>
                <div class="col-md-4">
                    <h4><a class="link" href="{% url 'properties' %}">Properties</a></h4>
                            <p>To manage your properties, then for to <a class="link" href="{% url 'properties' %}">properties</a></p>
                </div>
                <div class="col-md-4">
                    <h4><a class="link" href="{% url 'tickets' %}">Tickets</a></h4>
                            <p>To see tickets and comments, then go to <a class="link" href="{% url 'tickets' %}">tickets</a></p>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <h1 class="h-center">REMS</h1>
    <div class="container-fluid second-bg row">
        <p> In REMS you will manage Real Estate projects in collaboration with your team. If you
            have not created an account yet, then <a class="link" href="/accounts/signup/">sign up</a>
            first. or <a class="link" href="/accounts/login/">sign in</a>
        </p>
    </div>
    <div class="container-fluid second-bg row">
        <div class="col-md-8 mt-3 offset-md-2">
            <p>Or Login as a Guest</p>
            <form class="login" method="POST" action="{% url 'account_login' %}">
                {% csrf_token %}
                {{ form.as_p }}
                {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                {% endif %}
                <button type="button" class="btn btn-guest" onclick="guestLogin()">As Guest</button>
                <style>
                    input[type="hidden"] {
                        display: none;
                    }
                </style>
            </form>
        </div>
    </div>
    <script>
        function guestLogin() {
            const form = document.querySelector('.login');
            const usernameField = form.querySelector('input[name="login"]');
            const passwordField = form.querySelector('input[name="password"]');
    
            if (usernameField && passwordField) {
                usernameField.value = "guest";
                passwordField.value = "Youguessedit123";
                form.submit();
            }
        }
    </script>
    {% endif %}
</div>

{%endblock%}